!function(e){var t=void 0;"undefined"!=typeof app&&(t=app.browser);var r,a={backspace:8,tab:9,enter:13,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"?":191,minus:"opera"==t?[109,45]:"mozilla"==t?109:[189,109],plus:"opera"==t?[61,43]:"mozilla"==t?[61,107]:[187,107]},n={},i={},s=!1,o=function(t,r){var a=t;r.ctrl&&(a+="_ctrl"),r.alt&&(a+="_alt"),r.shift&&(a+="_shift");var n=function(e,t){return t&&16!==t&&17!==t&&18!==t&&(e+="_"+t),e};if(e.isArray(r.which)){var i=[];return e.each(r.which,(function(e,t){i.push(n(a,t))})),i}return n(a,r.which)},c=function(t){var r={},n=t.split("+");return e.each(n,(function(e,t){"ctrl"===t||"alt"===t||"shift"===t?r[t]=!0:r.which=a[t]||t.toUpperCase().charCodeAt()})),r},u=function(t,a){if(r){var n={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey,which:a.which},i=o(t,n),s=r[i];if(s){var c=function(t){var r=t.tagName.toLowerCase(),a=t.type;return"input"===r&&e.inArray(a,["text","password","file","search","email","number","tel","url","week","time","month","datetime-local","date"])>-1||"textarea"===r}(a.target),u=!1;e.each(s,(function(e,t){c&&!t.enableInInput||(u||(a.preventDefault(),u=!0),t.handler(a))}))}}};e.Shortcuts={},e.Shortcuts.start=function(a){if(r=n[a=a||"default"],!s)return e(document).on(("opera"==t?"keypress":"keydown")+".shortcuts",(function(e){"keypress"===e.type&&e.which>=97&&e.which<=122&&(e.which=e.which-32),i[e.which]||u("down",e),i[e.which]=!0,u("hold",e)})),e(document).on("keyup.shortcuts",(function(e){i[e.which]=!1,u("up",e)})),s=!0,this},e.Shortcuts.stop=function(){return e(document).off("keypress.shortcuts keydown.shortcuts keyup.shortcuts"),s=!1,this},e.Shortcuts.add=function(t){if(!t.mask)throw new Error("$.Shortcuts.add: required parameter 'params.mask' is undefined.");if(!t.handler)throw new Error("$.Shortcuts.add: required parameter 'params.handler' is undefined.");var r=t.type||"down",a=t.list?t.list.replace(/\s+/g,"").split(","):["default"];return e.each(a,(function(a,i){n[i]||(n[i]={});var s=n[i],u=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(u,(function(a,n){var i=c(n),u=o(r,i);e.isArray(u)||(u=[u]),e.each(u,(function(e,r){s[r]||(s[r]=[]),s[r].push(t)}))}))})),this},e.Shortcuts.remove=function(t){if(!t.mask)throw new Error("$.Shortcuts.remove: required parameter 'params.mask' is undefined.");var r=t.type||"down",a=t.list?t.list.replace(/\s+/g,"").split(","):["default"];return e.each(a,(function(a,i){if(!n[i])return!0;var s=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(s,(function(t,a){var s=c(a),u=o(r,s);e.isArray(u)||(u=[u]),e.each(u,(function(e,t){delete n[i][t]}))}))})),this}}(jQuery);
